<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>problema2</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <link rel="stylesheet" href="problema2.css">
    </head>
    <body>
    	<script type="text/javascript">
          var margin = {vertical: 40, horizontal: 40};
          var width = 800 - 2 * margin.horizontal;
          var height = 500 - 2 * margin.vertical;
          var npoints = getRandomInt(10, 51);
          var dataset = createDataset(npoints);
          var rPadding = 6;

          d3.select("body")
            .append("button")
            .attr("type", "button")
            .attr("class", "play")
            .style("top", (height + 2 * margin.vertical) + "px")
            .style("left", ((width + 2 * margin.horizontal) / 2) + "px")
            .text("Random");
            // .on("click", function(){
            //
            //              });

          //creates scales for x and y position, radius r and color from black to blue
          var xScale = d3.scaleLinear( )
                         .domain([0, d3.max(dataset, function(d){ return d[0]; })])
                         .rangeRound([rPadding, width - rPadding]);

          var yScale = d3.scaleLinear( )
                         .domain([0, d3.max(dataset, function(d){ return d[1]; })])
                         .rangeRound([height - rPadding, rPadding]);

          var rScale = d3.scaleLinear( )
                         .domain([0, d3.max(dataset, function(d){ return d[2]; })])
                         .rangeRound([3, 6]);

          var cScale = d3.scaleLinear( )
                         .domain([0, d3.max(dataset, function(d){ return d[3]; })])
                         .range(["black", "blue"]);

          //creates both x and y axis
          var xAxis = d3.axisBottom( )
                        .scale(xScale)
                        .ticks(10);

          var yAxis = d3.axisLeft( )
                        .scale(yScale)
                        .ticks(10);

          //creates svg element inside html's body and instantiates an object
          var _svg = d3.select("body")
                       .append("svg")
                       .attr("width", width + 2 * margin.horizontal)
                       .attr("height", height + 2 * margin.vertical);

          //adding x and y axis on screen
          _svg.append("g")
              .attr("class", "xAxis")
              .attr("transform", "translate(" + margin.horizontal + "," + (height + margin.vertical + 2) + ")")
              .call(xAxis);

          _svg.append("g")
              .attr("class", "yAxis")
              .attr("transform", "translate(" + (margin.horizontal - 2) + "," + margin.vertical + ")")
              .call(yAxis);

          //adding text on top side of the plot
          _svg.append("text")
              .attr("x", (width + 2 * margin.horizontal) / 2)
              .attr("y", margin.horizontal / 2)
              .attr("font-family", "Verdana")
              .attr("font-size", 20)
              .text(npoints);

          //instantiates an svg group object where the dataset lies on the screen
          // and insert data points
          _svg.append("g")
              .attr("transform", "translate(" + margin.horizontal + "," + margin.vertical + ")")
              .selectAll("circle")
              .data(dataset)
              .enter( )
              .append("circle")
              .attr("cx", function(d){ return xScale(d[0]); })
              .attr("cy", function(d){ return yScale(d[1]); })
              .attr("r", function(d){ return rScale(d[2]); })
              .attr("fill", function(d){ return cScale(d[3]); });

         //generates a random dataset where each element is of dimension [x, y, z, w]
         function createDataset(npoints){
            var array = new Array(npoints);

            for(var i = 0; i < npoints; i++){
                //generates four data points between 0 and 100
                var x = getRandomInt(0, 101);
                var y = getRandomInt(0, 101);
                var z = getRandomInt(0, 101);
                var w = getRandomInt(0, 101);

                array[i] = [x, y, z, w];
            }

            return array;
         }

         //generates a random number like this [min, max)
         function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
         }
    	</script>
    </body>
</html>
